---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="Contact Us"
  description="Get in touch with Chiltern Computers for computer repair, IT support, and custom PC builds in Harold Hill, Romford, Essex."
>
  <div class="section-bg-2" style="padding: 120px 20px 80px; min-height: 100vh;">
    <div class="container">
      
      <!-- Page Header -->
      <div style="text-align: center; margin-bottom: 60px;">
        <h1 class="space-font galaxy-text cosmic-glow" style="font-size: clamp(32px, 6vw, 48px); margin-bottom: 16px;">
          Contact Us
        </h1>
        <div style="height: 3px; width: 120px; background: linear-gradient(90deg, var(--plasma-cyan), var(--aurora-green)); margin: 0 auto 20px; border-radius: 2px;"></div>
        <p class="alien-font" style="color: var(--comet-silver); font-size: 16px; max-width: 600px; margin: 0 auto;">
          Get expert computer repair and IT support in Harold Hill, Romford, and throughout Essex.
        </p>
      </div>

      <!-- Contact Content Grid -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 40px; margin-bottom: 60px;">
        
        <!-- Contact Form -->
        <div class="cosmic-card" style="padding: 40px;">
          <h2 class="space-font cosmic-glow" style="color: var(--aurora-green); font-size: 24px; margin-bottom: 24px; display: flex; align-items: center; gap: 8px;">
            <span>üìß</span>Send Us a Message
          </h2>
          
          <!-- Success Message (Hidden by default) -->
          <div id="success-message" style="display: none; background: rgba(16, 185, 129, 0.1); border: 1px solid var(--aurora-green); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
            <p class="alien-font" style="color: var(--aurora-green); font-size: 14px; margin: 0; display: flex; align-items: center; gap: 8px;">
              <span>‚úÖ</span>
              Message sent successfully! We'll get back to you within 24 hours.
            </p>
          </div>

          <!-- Error Message (Hidden by default) -->
          <div id="error-message" style="display: none; background: rgba(220, 38, 38, 0.1); border: 1px solid var(--mars-red); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
            <p class="alien-font" style="color: var(--mars-red); font-size: 14px; margin: 0; display: flex; align-items: center; gap: 8px;">
              <span>‚ùå</span>
              Sorry, there was an error sending your message. Please try calling us instead.
            </p>
          </div>

          <form id="contact-form" style="space-y: 20px;">
            <!-- Name Field -->
            <div style="margin-bottom: 20px;">
              <label for="user_name" class="space-font" style="color: var(--starlight-white); font-size: 14px; display: block; margin-bottom: 8px;">
                Your Name *
              </label>
              <input 
                type="text" 
                id="user_name" 
                name="user_name" 
                required
                style="width: 100%; padding: 12px 16px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--plasma-cyan); border-radius: 8px; color: var(--starlight-white); font-size: 14px; transition: all 0.3s ease;"
                placeholder="Enter your full name"
              />
            </div>

            <!-- Email Field -->
            <div style="margin-bottom: 20px;">
              <label for="user_email" class="space-font" style="color: var(--starlight-white); font-size: 14px; display: block; margin-bottom: 8px;">
                Email Address *
              </label>
              <input 
                type="email" 
                id="user_email" 
                name="user_email" 
                required
                style="width: 100%; padding: 12px 16px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--plasma-cyan); border-radius: 8px; color: var(--starlight-white); font-size: 14px; transition: all 0.3s ease;"
                placeholder="your.email@example.com"
              />
            </div>

            <!-- Phone Field -->
            <div style="margin-bottom: 20px;">
              <label for="user_phone" class="space-font" style="color: var(--starlight-white); font-size: 14px; display: block; margin-bottom: 8px;">
                Phone Number
              </label>
              <input 
                type="tel" 
                id="user_phone" 
                name="user_phone"
                style="width: 100%; padding: 12px 16px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--plasma-cyan); border-radius: 8px; color: var(--starlight-white); font-size: 14px; transition: all 0.3s ease;"
                placeholder="07123 456789"
              />
            </div>

            <!-- Service Type -->
            <div style="margin-bottom: 20px;">
              <label for="service_type" class="space-font" style="color: var(--starlight-white); font-size: 14px; display: block; margin-bottom: 8px;">
                Service Required
              </label>
              <select 
                id="service_type" 
                name="service_type"
                style="width: 100%; padding: 12px 16px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--plasma-cyan); border-radius: 8px; color: var(--starlight-white); font-size: 14px; transition: all 0.3s ease;"
              >
                <option value="">Select a service...</option>
                <option value="Computer Repair">Computer Repair</option>
                <option value="Laptop Repair">Laptop Repair</option>
                <option value="Custom PC Build">Custom PC Build</option>
                <option value="Virus Removal">Virus Removal</option>
                <option value="Data Recovery">Data Recovery</option>
                <option value="IT Support">IT Support</option>
                <option value="Hardware Upgrade">Hardware Upgrade</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <!-- Message Field -->
            <div style="margin-bottom: 20px;">
              <label for="message" class="space-font" style="color: var(--starlight-white); font-size: 14px; display: block; margin-bottom: 8px;">
                Message *
              </label>
              <textarea 
                id="message" 
                name="message" 
                rows="5" 
                required
                style="width: 100%; padding: 12px 16px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--plasma-cyan); border-radius: 8px; color: var(--starlight-white); font-size: 14px; resize: vertical; transition: all 0.3s ease;"
                placeholder="Please describe your computer issue or service requirements..."
              ></textarea>
            </div>

            <!-- Submit Button -->
            <button 
              type="submit" 
              id="submit-btn"
              class="space-button" 
              style="width: 100%; padding: 16px; font-size: 16px; position: relative; overflow: hidden;"
            >
              <span id="btn-text">
                <span>üì§</span>
                Send Message
              </span>
              <span id="btn-loading" style="display: none;">
                <span>‚è≥</span>
                Sending...
              </span>
            </button>
          </form>
        </div>

        <!-- Contact Information -->
        <div class="cosmic-card" style="padding: 40px;">
          <h2 class="space-font cosmic-glow" style="color: var(--nebula-purple); font-size: 24px; margin-bottom: 24px; display: flex; align-items: center; gap: 8px;">
            <span>üìû</span>Get in Touch
          </h2>

          <!-- Contact Methods -->
          <div style="space-y: 24px;">
            <!-- Phone Numbers -->
            <div style="margin-bottom: 24px;">
              <h3 class="space-font" style="color: var(--aurora-green); font-size: 18px; margin-bottom: 12px;">üì± Call Us</h3>
              <div style="space-y: 8px;">
                <div>
                  <a href="tel:+447971331814" class="alien-font" style="color: var(--starlight-white); font-size: 16px; text-decoration: none; display: block; margin-bottom: 4px; transition: color 0.3s ease;">
                    üì± <strong>Mobile:</strong> 07971 331814
                  </a>
                </div>
                <div>
                  <a href="tel:+441708347341" class="alien-font" style="color: var(--starlight-white); font-size: 16px; text-decoration: none; display: block; transition: color 0.3s ease;">
                    ‚òéÔ∏è <strong>Landline:</strong> 01708 347341
                  </a>
                </div>
              </div>
            </div>

            <!-- Email -->
            <div style="margin-bottom: 24px;">
              <h3 class="space-font" style="color: var(--aurora-green); font-size: 18px; margin-bottom: 12px;">üìß Email Us</h3>
              <a href="mailto:david@chilterncomputers.net" class="alien-font" style="color: var(--starlight-white); font-size: 16px; text-decoration: none; transition: color 0.3s ease;">
                david@chilterncomputers.net
              </a>
            </div>

            <!-- Address -->
            <div style="margin-bottom: 24px;">
              <h3 class="space-font" style="color: var(--aurora-green); font-size: 18px; margin-bottom: 12px;">üìç Visit Us</h3>
              <address class="alien-font" style="color: var(--starlight-white); font-size: 16px; font-style: normal; line-height: 1.5;">
                38 Hilldene Avenue<br>
                Harold Hill, Romford<br>
                Essex, RM3 8YP
              </address>
              <button 
                onclick="openMaps()" 
                class="space-button"
                style="margin-top: 12px; padding: 8px 16px; font-size: 14px;"
              >
                <span>üó∫Ô∏è</span>
                View on Map
              </button>
            </div>

            <!-- Operating Hours -->
            <div style="background: rgba(139, 92, 246, 0.1); border: 1px solid var(--nebula-purple); border-radius: 8px; padding: 20px;">
              <h3 class="space-font" style="color: var(--nebula-purple); font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                <span>üïí</span>Operating Hours
              </h3>
              <div class="alien-font" style="color: var(--starlight-white); line-height: 1.6;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                  <span>Monday - Sunday:</span>
                  <span style="color: var(--aurora-green); font-weight: 600;">9:00 AM - 9:00 PM</span>
                </div>
                <p style="font-size: 14px; color: var(--comet-silver); margin-top: 8px; margin-bottom: 0;">
                  Emergency repairs available by appointment
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Internal Links Section (Fixes "Pages Without Internal Outlinks") -->
      <div class="cosmic-card" style="padding: 32px; text-align: center;">
        <h2 class="space-font cosmic-glow" style="color: var(--solar-orange); font-size: 24px; margin-bottom: 20px;">
          üöÄ Our Services
        </h2>
        <p class="alien-font" style="color: var(--comet-silver); margin-bottom: 24px;">
          Explore our full range of computer repair and IT support services:
        </p>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
          <a href="/services/repairs" class="space-button" style="text-decoration: none;">
            <span>üîß</span>
            Computer Repairs
          </a>
          <a href="/services/custom-pcs" class="space-button" style="text-decoration: none;">
            <span>üéÆ</span>
            Custom PC Builds
          </a>
          <a href="/services/new-used" class="space-button" style="text-decoration: none;">
            <span>üíª</span>
            New & Refurb PCs
          </a>
          <a href="/about" class="space-button" style="text-decoration: none;">
            <span>‚ÑπÔ∏è</span>
            About Us
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- EmailJS CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  
  <script>
    // Initialize EmailJS with your Public Key
    emailjs.init('5c3bc4aaf8bb01a7c73e605e511e7de9'); // Replace with your actual public key

    // Handle form submission
    document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault();
      
      const submitBtn = document.getElementById('submit-btn');
      const btnText = document.getElementById('btn-text');
      const btnLoading = document.getElementById('btn-loading');
      const successMessage = document.getElementById('success-message');
      const errorMessage = document.getElementById('error-message');
      
      // Show loading state
      btnText.style.display = 'none';
      btnLoading.style.display = 'block';
      submitBtn.disabled = true;
      
      // Hide previous messages
      successMessage.style.display = 'none';
      errorMessage.style.display = 'none';
      
      // Send email using EmailJS
      emailjs.sendForm('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', this)
        .then(function(response) {
          console.log('SUCCESS!', response.status, response.text);
          
          // Show success message
          successMessage.style.display = 'block';
          
          // Reset form
          document.getElementById('contact-form').reset();
          
          // Scroll to success message
          successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
          
        }, function(error) {
          console.log('FAILED...', error);
          
          // Show error message
          errorMessage.style.display = 'block';
          
          // Scroll to error message
          errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        })
        .finally(function() {
          // Reset button state
          btnText.style.display = 'block';
          btnLoading.style.display = 'none';
          submitBtn.disabled = false;
        });
    });

    // Open Google Maps
    function openMaps() {
      const address = "38 Hilldene Avenue, Harold Hill, Romford, Essex, RM3 8YP";
      const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`;
      window.open(googleMapsUrl, '_blank');
    }

    // Enhanced form styling
    document.querySelectorAll('input, select, textarea').forEach(function(element) {
      element.addEventListener('focus', function() {
        this.style.borderColor = 'var(--aurora-green)';
        this.style.boxShadow = '0 0 10px rgba(16, 185, 129, 0.3)';
      });
      
      element.addEventListener('blur', function() {
        this.style.borderColor = 'var(--plasma-cyan)';
        this.style.boxShadow = 'none';
      });
    });
  </script>

  <style>
    /* Contact Form Enhancements */
    input::placeholder,
    textarea::placeholder,
    select {
      color: var(--comet-silver) !important;
      opacity: 0.7;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--aurora-green) !important;
      box-shadow: 0 0 10px rgba(16, 185, 129, 0.3) !important;
    }

    /* Button hover effects */
    .space-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(6, 182, 212, 0.4);
    }

    /* Link hover effects */
    a:hover {
      color: var(--plasma-cyan) !important;
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .container > div:first-child {
        grid-template-columns: 1fr !important;
        gap: 32px !important;
      }
      
      .cosmic-card {
        padding: 24px !important;
      }
      
      .space-button {
        padding: 12px 20px !important;
        font-size: 14px !important;
      }
    }

    @media (max-width: 480px) {
      .cosmic-card {
        padding: 20px !important;
      }
      
      input, textarea, select {
        font-size: 16px !important; /* Prevents zoom on iOS */
      }
    }
  </style>
</Layout>